<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ProductDao">

	<select id="ygProductListAll" parameterType="Product"
		resultType="Product">
		SELECT *
		FROM
		(
		Select rownum rn, a.*
		from
		(
		select
		p.p_code,p.p_name,p.p_size,p.p_c_mcode,p.p_qty,c1.content s_name,
		c2.content
		cate_name
		from product p,common c1,common c2
		where p.p_size =
		c1.mcode
		and p.p_c_mcode=c2.mcode
		order by p_code
		)

		a
		)

		WHERE rn between #{start} and #{end}

	</select>



	<select id="ygProductTotal" resultType="int">
		select count(*) FROM
		product
	</select>

	<select id="ygproductContent" parameterType="Product" resultType="Product">


		select 	p.p_code,p.p_name,p.p_size,p.p_price,p.p_qty,p.p_img,
				c1.content s_name,c2.content cate_name
		
		from 	product p,common c1,common c2
		where 	p.p_size =c1.mcode
		and 	p.p_c_mcode=c2.mcode
		
		and 	p_code=#{p_code}
		and 	p_size=#{p_size}


	</select>



	<select id="yglistManager" resultType="product">
		select * From product


	</select>
	<insert id="productInsert" parameterType="Product">
	
		insert into product
		(p_code,p_size,p_name,p_c_bcode,p_c_mcode,p_qty,p_price,p_img)
		values
		(#{p_code},#{p_size},#{p_name},#{p_c_bcode},#{p_c_mcode},#{p_qty},#{p_price},#{p_img})
		

	</insert>

	<select id="ygCateProductList1" resultType="Common">
       <![CDATA[
         select mcode,content From common
         where bcode=100 and mcode<>999 
         
      ]]>
      </select>
      
      <select id="ygCateProductList2" resultType="Common">
       <![CDATA[
         select mcode,content From common
         where bcode=200 and mcode<>999 
         
      ]]>
      </select>
      

	<update id="ygproductUpdate" parameterType="Product">
		update product
		set
		p_qty=#{p_qty}, p_price=#{p_price}
		where p_code= #{p_code}
		and p_size= #{p_size}
	</update>


	<delete parameterType="int" id="productDelete">
		delete from product
		where p_code=#{p_code} and p_size=#{p_size} 
	</delete>
	


</mapper>